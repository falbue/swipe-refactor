<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Swipe - –°–µ—Å—Å–∏—è</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>

<body>
    <div class="session-container">
        <header class="session-header">
            <div class="header-content">
                <h1>Code Swipe</h1>
                <div class="session-info">
                    <span id="repo-name"></span>
                    <span class="separator">|</span>
                    <span id="progress-text"></span>
                </div>
            </div>
            <button id="exit-btn" class="btn btn-secondary" onclick="exitSession()">–í—ã—Ö–æ–¥</button>
        </header>

        <main class="session-main">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–¥–∞ -->
            <div id="card-container" class="card-container">
                <div class="card swipe-card" id="current-card">
                    <div class="card-header">
                        <span class="file-path" id="file-path"></span>
                        <span class="lines-count" id="lines-count"></span>
                    </div>
                    <div class="card-body">
                        <div class="code-preview">
                            <pre><code id="code-content" class="language-python"></code></pre>
                        </div>
                    </div>
                    <div class="card-footer">
                        <p class="function-name" id="function-name"></p>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä -->
            <div class="progress-section">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-bar"></div>
                </div>
                <div class="progress-stats">
                    <div class="stat">
                        <span class="stat-label">‚úì –û–¥–æ–±—Ä–µ–Ω–æ</span>
                        <span class="stat-value" id="approved-count">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">‚úèÔ∏è –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ</span>
                        <span class="stat-value" id="edited-count">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ</span>
                        <span class="stat-value" id="skipped-count">0</span>
                    </div>
                </div>
            </div>

            <!-- –î–µ–π—Å—Ç–≤–∏—è -->
            <div class="actions-section">
                <div class="swipe-buttons">
                    <button class="btn btn-secondary btn-large" id="skip-btn" onclick="skipCard()">
                        <span>‚û°Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</span>
                    </button>
                    <button class="btn btn-primary btn-large" id="edit-btn" onclick="openEditor()">
                        <span>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
                    </button>
                    <button class="btn btn-success btn-large" id="approve-btn" onclick="approveCard()">
                        <span>‚úì –û–¥–æ–±—Ä–∏—Ç—å</span>
                    </button>
                </div>
                <button class="btn btn-accent" id="create-pr-btn" onclick="createPullRequest()">
                    üöÄ –°–æ–∑–¥–∞—Ç—å Pull Request
                </button>
            </div>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
        <div id="editor-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞</h2>
                    <button class="btn-close" onclick="closeEditor()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="editor-wrapper">
                        <textarea id="code-editor" class="code-editor"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeEditor()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveEdit()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div id="toast" class="toast"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
    <script src="/static/api-client.js"></script>
    <script src="/static/session.js"></script>
</body>

</html>