#  –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
–ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)
‚îÇ
‚îú‚îÄ‚îÄ –§—Ä–æ–Ω—Ç–µ–Ω–¥: —á–∏—Å—Ç—ã–π HTML/CSS/JS
‚îÇ   ‚îú‚îÄ‚îÄ swipe-interface.js (–ª–æ–≥–∏–∫–∞ —Å–≤–∞–π–ø–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ code-editor.js (Monaco Editor —á–µ—Ä–µ–∑ CDN)
‚îÇ   ‚îú‚îÄ‚îÄ github-auth.js (OAuth flow)
‚îÇ   ‚îî‚îÄ‚îÄ progress-tracker.js (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
‚îÇ
‚îî‚îÄ‚îÄ –ë—ç–∫–µ–Ω–¥ (FastAPI)
    ‚îú‚îÄ‚îÄ /auth/github ‚Üí OAuth
    ‚îú‚îÄ‚îÄ /api/repos ‚Üí —Å–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
    ‚îú‚îÄ‚îÄ /api/session ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    ‚îú‚îÄ‚îÄ /api/cards ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
    ‚îú‚îÄ‚îÄ /api/dependencies ‚Üí –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
    ‚îú‚îÄ‚îÄ /api/card/{id}/edit ‚Üí –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∫–∏ (–ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç)
    ‚îî‚îÄ‚îÄ /api/session/{id}/create-pr ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ Pull Request
```
> [!note] üí° **–í–∞–∂–Ω–æ**:
>–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
**–ü—É—à –≤ GitHub –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** –¥–æ —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ `/create-pr`
–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏**

---
# –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
## –≠—Ç–∞–ø 1: MVP
|–ö–æ–º–ø–æ–Ω–µ–Ω—Ç|–†–µ–∞–ª–∏–∑–∞—Ü–∏—è|
|---|---|
|**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**|GitHub OAuth —á–µ—Ä–µ–∑ `httpx` + `authlib`|
|**–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞**|–¢–æ–ª—å–∫–æ Python —á–µ—Ä–µ–∑ `ast`|
|**–ö–∞—Ä—Ç–æ—á–∫–∏**|1 —Ñ—É–Ω–∫—Ü–∏—è = 1 –∫–∞—Ä—Ç–æ—á–∫–∞. –ë–æ–ª—å—à–∏–µ (>50 —Å—Ç—Ä–æ–∫) ‚Äî –ø–æ–º–µ—á–∞—Ç—å –∫–∞–∫ ¬´–°–ª–æ–∂–Ω–∞—è¬ª|
|**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**|–°–≤–∞–π–ø (`hammer.js`), —Ä–µ–¥–∞–∫—Ç–æ—Ä (Monaco CDN)|
|**Workflow**|–ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Üí **–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É** (–±–µ–∑ –ø—É—à–∞!)|
|**PR**|–¢–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É: `/session/{id}/create-pr` ‚Üí –ø—É—à + —Å–æ–∑–¥–∞–Ω–∏–µ PR|
## –≠—Ç–∞–ø 2: –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
|–§–∏—á–∞|–†–µ–∞–ª–∏–∑–∞—Ü–∏—è|
|---|---|
|**–£–º–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ**|–•—ç—à–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ + —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–º–∏—Ç–∞—Ö –≤ `main`|
|**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**|–ò–Ω–¥–µ–∫—Å —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç—Ä–æ–∏—Ç—Å—è –ø—Ä–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏|
|**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**|–°—á—ë—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (polling)|
## –≠—Ç–∞–ø 3: –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏
|–§–∏—á–∞|–†–µ–∞–ª–∏–∑–∞—Ü–∏—è|
|---|---|
|**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**|–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –ø—É–±–ª–∏—á–Ω—ã–º –∫–∞—Ä—Ç–æ—á–∫–∞–º (—Å—Å—ã–ª–∫–∏ –Ω–∞ Gist)|
|**–ü—É–±–ª–∏–∫–∞—Ü–∏—è**|–≠–∫—Å–ø–æ—Ä—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–∫ Gist ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –ë–î|

---

# –°—Ö–µ–º—ã
## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgeSQL)
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users (
  id SERIAL PRIMARY KEY,
  github_id BIGINT UNIQUE,
  access_token TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- –°–µ—Å—Å–∏–∏
sessions (
  id UUID PRIMARY KEY,
  user_id INT REFERENCES users(id),
  repo_full_name TEXT NOT NULL,     -- owner/repo
  base_commit_sha TEXT NOT NULL,    -- –∫–æ–º–º–∏—Ç, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∞–ª–∏
  branch_name TEXT NOT NULL,        -- –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞: code-swipe/session-{id}
  status TEXT CHECK (status IN ('active', 'completed', 'abandoned')),
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- –ö–∞—Ä—Ç–æ—á–∫–∏ (—Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ!)
cards (
  id UUID PRIMARY KEY,
  session_id UUID REFERENCES sessions(id) ON DELETE CASCADE,
  card_hash TEXT NOT NULL,          -- —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö—ç—à: file + ast_signature + content_hash
  file_path TEXT NOT NULL,
  start_line INT,
  end_line INT,
  ast_signature TEXT,               -- "def clean_data(data: dict) -> str"
  content_hash TEXT,                -- —Ö—ç—à –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏
  status TEXT CHECK (status IN ('approved', 'edited', 'skipped', 'needs_review')),
  is_public BOOLEAN DEFAULT false,  -- –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
  gist_url TEXT,                    -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å—Å—ã–ª–∫–∞ –Ω–∞ Gist
  created_at TIMESTAMPTZ DEFAULT NOW()
)

-- –õ–∞–π–∫–∏ (–¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)
card_likes (
  id SERIAL PRIMARY KEY,
  card_hash TEXT NOT NULL,          -- —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ö—ç—à –∫–∞—Ä—Ç–æ—á–∫–∏ (–Ω–µ id!)
  user_id INT REFERENCES users(id),
  liked_at TIMESTAMPTZ DEFAULT NOW()
)
```

---
## –ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```python
# –°–µ—Å—Å–∏–∏
POST /api/session/                  # –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ, —Å–æ–∑–¥–∞—ë—Ç –≤–µ—Ç–∫—É, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç session_id
GET  /api/session/{id}              # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é (–ø—Ä–æ–≥—Ä–µ—Å—Å, —Å—Ç–∞—Ç—É—Å—ã)
PATCH /api/session/{id}/sync        # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã –≤ main

# –ö–∞—Ä—Ç–æ—á–∫–∏
GET  /api/session/{id}/cards/random # –°–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (—Ä–∞–Ω–¥–æ–º –∏–∑ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö)
POST /api/cards/{card_id}/approve   # –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ ‚Üí —Å—Ç–∞—Ç—É—Å = approved
POST /api/cards/{card_id}/edit      # –°–≤–∞–π–ø –≤–ª–µ–≤–æ ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç edited_code, –¥–µ–ª–∞–µ—Ç –∫–æ–º–º–∏—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
GET /api/dependencies               # ?file=...&symbol=... ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É + —Å–Ω–∏–ø–ø–µ—Ç

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
POST /api/cards/{card_hash}/publish-as-gist  # –°–æ–∑–¥–∞—ë—Ç Gist, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç gist_url
POST /api/cards/{card_hash}/like             # –õ–∞–π–∫ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
GET  /api/recommendations                    # –°–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ (–ø—É–±–ª–∏—á–Ω—ã–µ + –ª–∞–π–∫–∏)

# –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
POST /api/session/{id}/create-pr    # –ü—É—à–∏—Ç –≤–µ—Ç–∫—É –≤ GitHub + —Å–æ–∑–¥–∞—ë—Ç PR
```

---
## –§—Ä–æ–Ω—Ç–µ–Ω–¥ 
| –§–∞–π–ª                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                       |
| ----------------------- | ------------------------------------------------ |
| `index.html`            | –í—ã–±–æ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è                                |
| `session.html`          | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–≤–∞–π–ø–æ–≤                                |
| `swipe-engine.js`       | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤ ‚Üí –≤—ã–∑–æ–≤ `/approve` –∏–ª–∏ `/edit` |
| `monaco-loader.js`      | –ó–∞–≥—Ä—É–∑–∫–∞ Monaco –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏               |
| `api-client.js`         | –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±—ç–∫–µ–Ω–¥—É                |
| `progress-bar.js`       | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ¬´–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: X/Y¬ª                   |
| `dependency-tooltip.js` | –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏               |
|                         |                                                  |
> [!warning] **–í–∞–∂–Ω–æ**:
> –ü–æ—Å–ª–µ `/edit` ‚Üí –±—ç–∫–µ–Ω–¥ **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç** –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
> **–ü—É—à –≤ GitHub –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç** ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `/create-pr`

---

## Workflow –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ GitHub
2. –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí –±—ç–∫–µ–Ω–¥:
    - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–∞–ø–∫—É
    - –°–æ–∑–¥–∞—ë—Ç –≤–µ—Ç–∫—É `code-swipe/session-{id}`
    - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ ‚Üí —Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ë–î
3. –ü–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Üí —Å–≤–∞–π–ø–∞–µ—Ç
    - **–í–ø—Ä–∞–≤–æ** ‚Üí —Å—Ç–∞—Ç—É—Å `approved`
    - **–í–ª–µ–≤–æ** ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí **–∫–æ–º–º–∏—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É**
    -  **–ö–Ω–æ–ø–∫–∞** ¬´–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–∞–∫ Gist¬ª —Ä—è–¥–æ–º —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π
		- –ü—Ä–∏ –∫–ª–∏–∫–µ ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è Gist, —Å—Å—ã–ª–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `cards.gist_url`
		- –≠—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ–π (`is_public = true`) ‚Üí –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
4. –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å ¬´–°–æ–∑–¥–∞—Ç—å PR¬ª ‚Üí –±—ç–∫–µ–Ω–¥:
    - –ü—É—à–∏—Ç –≤–µ—Ç–∫—É –≤ GitHub
    - –°–æ–∑–¥–∞—ë—Ç Pull Request —á–µ—Ä–µ–∑ API
## –í–∞–∂–Ω–æ
- –í—Å–µ —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∞–Ω–∞–ª–∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ FastAPI (Celery –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –Ω–∞ MVP, –º–æ–∂–Ω–æ `BackgroundTasks`)
- –î–ª—è —Å–≤–∞–π–ø–æ–≤: –ø–æ–¥–∫–ª—é—á–∏—Ç—å `https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js`
- Monaco Editor: –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ CDN, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
